---
title: '免确认模式特有API'
linkTitle: '免确认订单'
weight: 9
description: >
  相对需确认模式, 免确认模式减少了用户确认授权这步操作, 因此在免确认模式下商户无法获取用户的授权状态, 为了解决商户的困扰, 我们为免确认模式特别提供了查询授权状态和调起授权页面的api接口, 这些接口仅在免确认模式下需要调用, 且必须调用。
type: 'docs'
---

用户进入支付场景之后, 建议先通过《查询用户授权状态》接口确认用户是否可以使用服务。如用户还不能使用服务, 需引导用户先【授权服务】(《授权服务(APP）》、《授权服务(H5）》、《授权服务(小程序）》）, 再创建订单。

业务流程图:

步骤一 商户通过《查询用户授权状态》接口, 确认用户是否可使用服务。

步骤二 如用户可使用服务, 则请求《创建支付分订单》接口, 创建订单。反之, 则引导用户【授权服务】(《授权服务(APP）》、《授权服务(H5）》、《授权服务(小程序）》）, 授权服务成功后微信会通过《授权服务回调通知》接口立即通知商户, 在收到授权服务成功通知前, 商户也可以通过《查询用户授权状态》接口主动查询用户是否可使用服务。

步骤三 商户创建订单成功后, 微信会通过《确认订单回调通知》接口通知商户订单确认情况, 收到回调通知后商户开始为用户提供服务或授权功能, 在收到订单确认成功通知前, 商户也可以通过《查询支付分订单》接口主动查询订单确认情况。

步骤四 用户结束服务, 商户根据实际情况调用《完结支付分订单》接口, 微信根据《完结支付分订单》接口中传递的扣款金额完成扣款。

步骤五 微信支付扣款成功后, 微信会通过《支付成功回调通知》接口立即通知商户。如扣款失败, 微信支付会周期性发起扣款请求, 直到扣款成功为止。
