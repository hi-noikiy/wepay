---
title: '微信先享卡常见技术问题'
linkTitle: '微信先享卡常见技术问题'
date: ''
weight: 1
description: >

type: 'docs'
---

Q:商户小程序调用【小程序拉起先享卡小程序领取先享卡】报错“页面异常 系统繁忙,请稍后再试(errcode273678001)”？

A:1）原因: 领卡页-商户订单号已存在, 这个是领卡 api, 所以每次 out_trade_no 都要新的, 且唯一, 而领过卡的用户又会提示已经领过只能查看的弹窗

2, Q:商户调用更新先享卡订单时, 先享卡目标 ID(objective_id)和先享卡奖励 ID(reward_id)怎么获取？

A:1）有先享卡平台生成, 商户可以通过领卡回调获取

3, Q:商户小程序调用【小程序拉起先享卡小程序领取先享卡】报错“页面异常 系统繁忙,请稍后再试(errcode269546520)”？

A:1）原因: 参数非法

4, Q:商户小程序调用【小程序拉起先享卡小程序领取先享卡】报错“页面打开异常, 请从商户 APP 或小程序打开领卡页”？

A:1）原因: 当商户小程序跳转过来没有携带参数时, 会报这个错误, 检查跳转时的 extraData 参数, 可以打印出来看看这个参数有什么问题

5, Q:商户小程序调用更新先享卡订单, 传入的是扣减‘performance_type’=>'decrease', 但为什么微信先享卡页面展示的约定进行中没有回退呢？

A:1）原因: 商户调用更新先享卡订单时使用的是使用的过流水号, 再次使用使用过的流水号时, 虽然可以调用接口成功, 但不会起作用, 检查流水号是否唯一

2）没有结算的约定可以修正, 已经结算的不能修正(约定结算就是: 用户的先享卡达到终态, 已退出、已完成、到期未完成等等。）

6, Q:用户领卡通知的回调一直收不到, 怎么回事？

A:1）没设置 apiv3 秘钥是不发送回调的, 需要在商户平台设置 APIv3 密钥, 详情参看文档指引http://kf.qq.com/faq/180830E36vyQ180830AZFZvu.html

2）检查下商户是否使用了阿里云的智能网关之类的加速服务, 导致一个公网 ip 可能对应多个域名, 这种情况微信目前还不支持, 商户需要切下网络"

7, Q:用户结算通知的回调一直收不到, 怎么回事？

A:1）没设置 apiv3 秘钥是不发送回调的, 需要在商户平台设置 APIv3 密钥, 详情参看文档指引http://kf.qq.com/faq/180830E36vyQ180830AZFZvu.html

2）检查下商户是否使用了阿里云的智能网关之类的加速服务, 导致一个公网 ip 可能对应多个域名, 这种情况微信目前还不支持, 商户需要切下网络"

8, Q:用户结算通知的回调这个 API 是在什么情况下触发的？

A:1）有最终结果的时候就回调, 提前完成约定, 提前退出约定, 到期结算, 这三种情况都会回调

9, Q:用户开卡后, 提交了优惠订单, 但是不支付, 然后用户人为关闭了先享卡, 这个时候再去支付这笔优惠订单的话, 既享受了先享优惠, 但又不能再通过先享卡约束用户了, 这中情况有什么建议吗？

A:1）商户可以通过查询先享卡进度控制这中情况, 查下用户的先享卡状态可以避免这种情况

10, Q:商户小程序调用【小程序拉起先享卡小程序领取先享卡】报错“页面异常 系统繁忙,请稍后再试(errcode273677970)”？

A:1）原因: 查询卡领取接口--非法 mchid-appid
