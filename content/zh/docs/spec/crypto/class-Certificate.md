---
title: '类: Certificate'
linkTitle: 'Certificate'
weight: 2
description: >
  SPKAC最初是由Netscape实现证书签名请求机制并正式指定为HTML5的`keygen`元素的一部分。
type: 'docs'
---

<!-- YAML
added: v0.11.8
-->

[HTML5's `keygen` element][]

`<keygen>` is deprecated since [HTML 5.2][] and new projects should not use this element anymore.

The `crypto` module provides the `Certificate` class for working with SPKAC
data. The most common usage is handling output generated by the HTML5
`<keygen>` element. Node.js uses [OpenSSL's SPKAC implementation][] internally.

## `Certificate.exportChallenge(spkac)`

<!-- YAML
added: v9.0.0
-->

- `spkac` {string | Buffer | TypedArray | DataView}
- Returns: {Buffer} The challenge component of the `spkac` data structure, which
  includes a public key and a challenge.

```js
const { Certificate } = require('crypto');
const spkac = getSpkacSomehow();
const challenge = Certificate.exportChallenge(spkac);
console.log(challenge.toString('utf8'));
// Prints: the challenge as a UTF8 string
```

## `Certificate.exportPublicKey(spkac[, encoding])`

<!-- YAML
added: v9.0.0
-->

- `spkac` {string | Buffer | TypedArray | DataView}
- `encoding` {string} The [encoding][] of the `spkac` string.
- Returns: {Buffer} The public key component of the `spkac` data structure,
  which includes a public key and a challenge.

```js
const { Certificate } = require('crypto');
const spkac = getSpkacSomehow();
const publicKey = Certificate.exportPublicKey(spkac);
console.log(publicKey);
// Prints: the public key as <Buffer ...>
```

## `Certificate.verifySpkac(spkac)`

<!-- YAML
added: v9.0.0
-->

- `spkac` {Buffer | TypedArray | DataView}
- Returns: {boolean} `true` if the given `spkac` data structure is valid,
  `false` otherwise.

```js
const { Certificate } = require('crypto');
const spkac = getSpkacSomehow();
console.log(Certificate.verifySpkac(Buffer.from(spkac)));
// Prints: true or false
```

## Legacy API

As a still supported legacy interface, it is possible (but not recommended) to
create new instances of the `crypto.Certificate` class as illustrated in the
examples below.

### `new crypto.Certificate()`

Instances of the `Certificate` class can be created using the `new` keyword
or by calling `crypto.Certificate()` as a function:

```js
const crypto = require('crypto');

const cert1 = new crypto.Certificate();
const cert2 = crypto.Certificate();
```

### `certificate.exportChallenge(spkac)`

<!-- YAML
added: v0.11.8
-->

- `spkac` {string | Buffer | TypedArray | DataView}
- Returns: {Buffer} The challenge component of the `spkac` data structure, which
  includes a public key and a challenge.

```js
const cert = require('crypto').Certificate();
const spkac = getSpkacSomehow();
const challenge = cert.exportChallenge(spkac);
console.log(challenge.toString('utf8'));
// Prints: the challenge as a UTF8 string
```

### `certificate.exportPublicKey(spkac)`

<!-- YAML
added: v0.11.8
-->

- `spkac` {string | Buffer | TypedArray | DataView}
- Returns: {Buffer} The public key component of the `spkac` data structure,
  which includes a public key and a challenge.

```js
const cert = require('crypto').Certificate();
const spkac = getSpkacSomehow();
const publicKey = cert.exportPublicKey(spkac);
console.log(publicKey);
// Prints: the public key as <Buffer ...>
```

### `certificate.verifySpkac(spkac)`

<!-- YAML
added: v0.11.8
-->

- `spkac` {Buffer | TypedArray | DataView}
- Returns: {boolean} `true` if the given `spkac` data structure is valid,
  `false` otherwise.

```js
const cert = require('crypto').Certificate();
const spkac = getSpkacSomehow();
console.log(cert.verifySpkac(Buffer.from(spkac)));
// Prints: true or false
```

[html 5.2]: https://www.w3.org/TR/html52/changes.html#features-removed
[html5's `keygen` element]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/keygen
[openssl's spkac implementation]: https://www.openssl.org/docs/man1.1.0/apps/openssl-spkac.html
