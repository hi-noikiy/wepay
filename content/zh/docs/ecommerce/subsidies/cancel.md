---
title: '取消补差 API'
linkTitle: '取消补差'
date: '2019-09-12'
weight: 3
description: >
  对带有补差标识的订单, 如果不需要补差, 可在发起发起分账前, 可调用这个接口进行取消补差。
type: 'docs'
---

{{% alert title="注意" color="warning"%}}

- 取消补差完成后, 商户可以对未补差的订单进行分账。
- 订单补差取消的前置条件是订单发生退款。

{{% /alert %}}

## 接口说明

**适用对象**: 电商平台\
**请求 URL**: https://api.mch.weixin.qq.com/v3/ecommerce/subsidies/cancel\
**请求方式**: POST\
**接口规则**: https://wechatpay-api.gitbook.io/wechatpay-api-v3

`path` 指该参数需在请求 URL 传参\
`query` 指该参数需在请求 JSON 传参

## 请求参数

| 变量           | 类型       | 必填 | 参数名/描述/示例值                                                      |
| -------------- | ---------- | ---- | ----------------------------------------------------------------------- |
| sub_mchid      | string(32) | 是   | `query` `二级商户号` 补差的电商平台二级商户, 填写微信支付分配的商户号。 |
|                |            |      | 1900000109                                                              |
| refund_id      | string(64) | 否   | `query` `微信退款单号`, 微信系统退款返回的唯一标识。                    |
|                |            |      | 3008450740201411110007820472                                            |
| transaction_id | string(64) | 是   | `query` `微信订单号` 微信支付订单号。                                   |
|                |            |      | 4208450740201411110007820472                                            |
| description    | string(80) | 是   | `query` `取消补差描述`, 查询的时候原样带回。                            |
|                |            |      | 订单退款                                                                |

### 请求示例

```json
{
  "sub_mchid": "1900013401",
  "refund_id": "3008450740201411110007820472",
  "transaction_id": "4208450740201411110007820472",
  "description": "订单退款"
}
```

## 返回参数

| 变量           | 类型       | 必填 | 参数名/描述/示例值                                              |
| -------------- | ---------- | ---- | --------------------------------------------------------------- |
| sub_mchid      | string(32) | 是   | `二级商户号` 补差的电商平台二级商户, 填写微信支付分配的商户号。 |
|                |            |      | 1900013401                                                      |
| transaction_id | string(64) | 是   | `微信订单号` 微信支付订单号。                                   |
|                |            |      | 4208450740201411110007820472                                    |
| refund_id      | string(64) | 否   | `微信退款单号`, 微信系统退款返回的唯一标识。                    |
|                |            |      | 3008450740201411110007820472                                    |
| result         | enum       | 是   | `取消补差结果`, 枚举值:<br>SUCCESS: 成功<br>FAIL: 失败<br>      |
|                |            |      | SUCCESS                                                         |
| description    | string(80) | 是   | `取消补差描述`                                                  |
|                |            |      | 订单退款                                                        |

### 返回示例

正常示例

```json
{
  "sub_mchid": "1900013401",
  "transaction_id": "4208450740201411110007820472",
  "refund_id": "3008450740201411110007820472",
  "result": "SUCCESS",
  "description": "订单退款"
}
```

## 错误码<sub>公共错误码</sub>

| 状态码 | 错误码            | 描述     | 解决方案                             |
| ------ | ----------------- | -------- | ------------------------------------ |
| 500    | SYSTEM_ERROR      | 系统错误 | 系统异常, 请使用相同参数稍后重新调用 |
| 400    | PARAM_ERROR       | 参数错误 | 请使用正确的参数重新调用             |
| 400    | INVALID_REQUEST   | 参数错误 | 请使用正确的参数重新调用             |
| 429    | FREQUENCY_LIMITED | 频率限制 | 请降低频率后重试                     |
