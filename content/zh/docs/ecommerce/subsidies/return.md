---
title: '请求补差回退 API'
linkTitle: '请求补差回退'
date: '2019-09-12'
weight: 4
description: >
  订单发送退款的时候, 可以对补贴成功的补差单发起回退。
type: 'docs'
---

{{% alert title="注意" color="warning"%}}

- 补差回退以原补差单位依据, 支持多次回退, 申请回退总金额不能超过补差金额。
- 此接口采用同步处理模式, 即在接收到商户请求后, 会实时返回处理结果。
- 补差回退的前置条件是订单发生退款。
- 系统异常(如返回 SYSTEM_ERROR）, 请使用相同参数稍后重新调用, 请务必用原商户补差回退单号和原参数来重入此接口。

{{% /alert %}}

## 接口说明

**适用对象**: 电商平台\
**请求 URL**: https://api.mch.weixin.qq.com/v3/ecommerce/subsidies/return\
**请求方式**: POST\
**接口规则**: https://wechatpay-api.gitbook.io/wechatpay-api-v3

`path` 指该参数需在请求 URL 传参\
`query` 指该参数需在请求 JSON 传参

## 请求参数

| 变量           | 类型       | 必填 | 参数名/描述/示例值                                                                                              |                              |
| -------------- | ---------- | ---- | --------------------------------------------------------------------------------------------------------------- | ---------------------------- |
| sub_mchid      | string(32) | 是   | query `二级商户号` 补差的电商平台二级商户, 填写微信支付分配的商户号。                                           |                              |
|                |            |      | 1900000109                                                                                                      |                              |
| out_order_no   | string(64) | 是   | query `商户补差回退单号` 商户系统内部的补差回退单号, 在商户系统内部唯一, 只能是数字、大小写字母`*-|\*@`, 同一补 | 差回退单号多次请求等同一次。 |
|                |            |      | P20150806125346                                                                                                 |                              |
| transaction_id | string(64) | 是   | query `微信订单号` 微信支付订单号。                                                                             |                              |
|                |            |      | 4208450740201411110007820472                                                                                    |                              |
| refund_id      | string(64) | 是   | query `微信退款单号`, 微信系统退款返回的唯一标识。                                                              |                              |
|                |            |      | 3008450740201411110007820472                                                                                    |                              |
| amount         | int        | 是   | query `补差回退金额`, 单位为分, 只能为整数, 不能超过补差单的补差金额。                                          |                              |
|                |            |      | 10                                                                                                              |                              |
| description    | string(80) | 是   | query `补差回退描述`, 查询的时候原样带回。                                                                      |                              |
|                |            |      | 测试备注                                                                                                        |                              |

### 请求示例

```json
{
  "sub*mchid": "1900000109",
  "out_order_no": "P20150806125346",
  "transaction_id": "4208450740201411110007820472",
  "refund_id": "3008450740201411110007820472",
  "amount": 10,
  "description": "测试备注"
}
```

## 返回参数

| 变量              | 类型       | 必填 | 参数名/描述/示例值                                                                                                                                                                                                                                                                                                                            |
| ----------------- | ---------- | ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| sub_mchid         | string(32) | 是   | `二级商户号` 补差的电商平台二级商户, 填写微信支付分配的商户号。                                                                                                                                                                                                                                                                               |
|                   |            |      | 1900000109                                                                                                                                                                                                                                                                                                                                    |
| transaction_id    | string(64) | 是   | `微信订单号` 微信支付订单号。                                                                                                                                                                                                                                                                                                                 |
|                   |            |      | 4208450740201411110007820472                                                                                                                                                                                                                                                                                                                  |
| subsidy_refund_id | string(64) | 是   | `微信补差回退单号`, 微信补差回退系统返回的唯一标识。                                                                                                                                                                                                                                                                                          |
|                   |            |      | 3008450740201411110007820472                                                                                                                                                                                                                                                                                                                  |
| refund_id         | string(64) | 是   | `微信退款单号`, 微信系统退款返回的唯一标识。                                                                                                                                                                                                                                                                                                  |
|                   |            |      | 3008450740201411110007820472                                                                                                                                                                                                                                                                                                                  |
| out_order_no      | string(64) | 是   | `商户补差回退单号` 商户系统内部的补差回退单号, 在商户系统内部唯一, 只能是数字、大小写字母`\*-|\*@` , 同一补差回退单号多次请求等同一次。                                                                                                                                                                                                       |
|                   |            |      | P20150806125346                                                                                                                                                                                                                                                                                                                               |
| amount            | int        | 是   | `补差回退金额`                                                                                                                                                                                                                                                                                                                                |
|                   |            |      | 10                                                                                                                                                                                                                                                                                                                                            |
| description       | string(80) | 是   | `补差回退描述`                                                                                                                                                                                                                                                                                                                                |
|                   |            |      | 测试备注                                                                                                                                                                                                                                                                                                                                      |
| result            | enum       | 是   | `补差回退结果`, 枚举值:<br>SUCCESS: 成功<br>FAIL: 失败                                                                                                                                                                                                                                                                                        |
|                   |            |      | SUCCESS                                                                                                                                                                                                                                                                                                                                       |
| success_time      | string(32) | 是   | `补差回退完成时间`, 遵循 rfc3339 标准格式, 格式为 YYYY-MM-DDTHH:mm:ss:sss+TIMEZONE, YYYY-MM-DD 表示年月日, T 出现在字符串中, 表示 time 元素的开头, HH:mm:ss:sss 表示时分秒毫秒, TIMEZONE 表示时区(+08:00 表示东八区时间, 领先 UTC 8 小时, 即北京时间）。例如: 2015-05-20T13:29:35+08:00 表示, 北京时间 2015 年 5 月 20 日 13 点 29 分 35 秒。 |
|                   |            |      | 2015-05-20T13:29:35.120+08:00                                                                                                                                                                                                                                                                                                                 |

### 返回示例

```json
{
  "sub_mchid": "1900000109",
  "transaction_id": "4208450740201411110007820472",
  "subsidy_refund_id": "3008450740201411110007820472",
  "refund_id": "3008450740201411110007820472",
  "out_order_no": "P20150806125346",
  "amount": 10,
  "description": "测试备注",
  "result": "SUCCESS",
  "success_time": "2015-05-20T13:29:35.120+08:00"
}
```

## 错误码<sub>公共错误码</sub>

| 状态码 | 错误码            | 描述     | 解决方案                             |
| ------ | ----------------- | -------- | ------------------------------------ |
| 500    | SYSTEM_ERROR      | 系统错误 | 系统异常, 请使用相同参数稍后重新调用 |
| 400    | PARAM_ERROR       | 参数错误 | 请使用正确的参数重新调用             |
| 400    | INVALID_REQUEST   | 参数错误 | 请使用正确的参数重新调用             |
| 429    | FREQUENCY_LIMITED | 频率限制 | 请降低频率后重试                     |
